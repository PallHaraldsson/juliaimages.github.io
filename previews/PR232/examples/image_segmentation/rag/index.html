<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Region Adjacency Graph · JuliaImages</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../democards/gridtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="JuliaImages logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">JuliaImages</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><a class="tocitem" href="../../../install/">Getting started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../../tutorials/quickstart/">Quickstart</a></li><li><a class="tocitem" href="../../../tutorials/arrays_colors/">Arrays, Numbers, and Colors</a></li><li><a class="tocitem" href="../../../tutorials/conversions_views/">Conversions vs. views</a></li><li><a class="tocitem" href="../../../tutorials/indexing/">Arrays: more advanced indexing</a></li></ul></li><li><span class="tocitem">Packages</span><ul><li><a class="tocitem" href="../../../pkgs/">Introduction</a></li><li><a class="tocitem" href="../../../pkgs/axes/">ImageAxes.jl</a></li><li><a class="tocitem" href="../../../pkgs/metadata/">ImageMetaData.jl</a></li><li><a class="tocitem" href="../../../pkgs/segmentation/">ImageSegmentation.jl</a></li><li><a class="tocitem" href="../../../pkgs/transformations/">ImageTransformations.jl</a></li><li><a class="tocitem" href="../../../pkgs/features/">ImageFeatures.jl</a></li></ul></li><li><a class="tocitem" href="../../">Demos</a></li><li><a class="tocitem" href="../../../function_reference/">References</a></li><li><a class="tocitem" href="../../../api_comparison/">Comparison with other image processing frameworks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Region Adjacency Graph</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Region Adjacency Graph</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaImages/juliaimages.github.io/blob/source/docs/examples/image_segmentation/rag.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Region-Adjacency-Graph"><a class="docs-heading-anchor" href="#Region-Adjacency-Graph">Region Adjacency Graph</a><a id="Region-Adjacency-Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Region-Adjacency-Graph" title="Permalink"></a></h1><p><a href="../rag.jl"><img src="https://img.shields.io/badge/download-julia-brightgreen.svg" alt="Source code"/></a> <img src="https://img.shields.io/badge/Author-Ashwani%20Rathee-blue" alt="Author"/> <img src="https://img.shields.io/date/1630800000" alt="Update time"/></p><p>In this demonstraton, we will study about region adjacency graph and region tree.</p><p>Region Adjacency Graph (RAG), <span>$G=V,E$</span>, is composed of nodes/vertices representing the regions and edges representing the adjacency. Region Adjacency Graphs, as the name suggests represent adjacency of regions with a graph. Each region in the image is a node in a graph.</p><p>There is an edge between every pair of adjacent regions (regions whose pixels are adjacent). The weight of between every two nodes can be defined in a variety of ways. For this example, we will use the difference of average color between two regions as their edge weight. The more similar the regions, the lesser the weight between them. Because we are using difference in mean color to compute the edge weight, the method has been named rag<em>mean</em>color.</p><h1 id="Creating-a-Region-Adjacency-Graph-(RAG)"><a class="docs-heading-anchor" href="#Creating-a-Region-Adjacency-Graph-(RAG)">Creating a Region Adjacency Graph (RAG)</a><a id="Creating-a-Region-Adjacency-Graph-(RAG)-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Region-Adjacency-Graph-(RAG)" title="Permalink"></a></h1><p>A region adjacency graph can directly be constructed from a SegmentedImage using the <code>region_adjacency_graph</code> function. Each segment is denoted by a vertex and edges are constructed between adjacent segments. The output is a tuple of SimpleWeightedGraph and a Dict(label=&gt;vertex) with weights assigned according to weight_fn.</p><pre><code class="language-julia hljs">using Images
using ImageSegmentation, Distances, TestImages</code></pre><p>We will use coffee image for this demonstration.</p><pre><code class="language-julia hljs">img = testimage(&quot;coffee&quot;)
seg = felzenszwalb(img, 10, 100)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Segmented Image with:
  labels map: 400×600 Matrix{Int64}
  number of labels: 51</code></pre><p>Here we calculate the weight of the graph edges using euclidean distance between 2 segments.</p><pre><code class="language-julia hljs">weight_fn(i,j) = euclidean(segment_pixel_count(seg, i), segment_pixel_count(seg, j))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">weight_fn (generic function with 1 method)</code></pre><p><code>region_adjacency_graph</code> requires the seg which has provides label map and weight to create the graph.</p><pre><code class="language-julia hljs">G, vert_map = region_adjacency_graph(seg, weight_fn)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">({51, 89} undirected simple Int64 graph with Float64 weights, Dict(5 =&gt; 5, 35 =&gt; 35, 30 =&gt; 30, 32 =&gt; 32, 6 =&gt; 6, 45 =&gt; 45, 4 =&gt; 4, 13 =&gt; 13, 12 =&gt; 12, 28 =&gt; 28…))</code></pre><p>G is an undirected simple Int64 graph with Float64 weights. <code>region_adjacency_graph</code> returns the RAG along with a Dict(label=&gt;vertex) map.</p><p>Here, the difference in pixel count has been used as the weight of the connecting edges. This difference measure can be useful if one wants to use this region adjacency graph to remove smaller segments by merging them with their neighbouring largest segment. Another useful difference measure is the euclidean distance between the mean intensities of the two segments.</p><h2 id="Creating-a-Region-Tree"><a class="docs-heading-anchor" href="#Creating-a-Region-Tree">Creating a Region Tree</a><a id="Creating-a-Region-Tree-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-a-Region-Tree" title="Permalink"></a></h2><p>A region tree can be constructed from an image using <code>region_tree</code> function. If the image is not homogeneous, then it is split into half along each dimension and the function is called recursively for each portion of the image. The output is a RegionTree.</p><pre><code class="language-julia hljs">function homogeneous(img)
    min, max = extrema(img)
    max - min &lt; 0.2
end

t = region_tree( Gray.(img), homogeneous)        # `img` is an image</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Cell: RegionTrees.HyperRectangle{2, Float64}([1.0, 1.0], [400.0, 600.0])</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/johnnychen94/DemoCards.jl">DemoCards.jl</a> and <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.6 on <span class="colophon-date" title="Thursday 9 September 2021 08:25">Thursday 9 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
